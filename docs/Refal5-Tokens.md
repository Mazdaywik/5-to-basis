Библиотека `Refal5-Tokens`
==========================

Токены (лексические домены) Рефала-5.

Библиотека нужна для совместимости Рефалом-05 — она содержит определения
элементов синтаксического дерева в виде `*$EENUM`’ов.

    t.Token ::= (s.TokType t.Pos e.TokValue)

    s.TokType ~ e.TokValue ::=
      TkName ~ s.CHAR*
      TkCompound ~ s.CHAR*
      TkMacroDigit ~ s.NUMBER
      TkChar ~ s.CHAR
      TkVariable ~ s.VarType e.VarName
      TkOpenBracket, TkCloseBracket, TkCloseCall,
      TkOpenBlock, TkCloseBlock ~ пусто
      TkOpenCall ~ s.CHAR* -- имя функции
      TkComma, TkColon, TkAssign, TkSemicolon ~ пусто
      TkExtern, TkEntry ~ пусто
      TkSpecComment ~ char*
      TkEOF ~ пусто
      TkError ~ s.CHAR* -- сообщение об ошибке в лексике
    s.VarType ::= 's' | 't' | 'e'

Каждый токен содержит тег токена (, позицию в исходном тексте и необязательный
атрибут токена.

* `s.TokType` — тег токена,
* `t.Pos` — позиция в исходном файле,
* `e.TokValue` — атрибут токена.

Токены:

* `TkName` — идентификатор (имя функции или составной символ в идентификаторной
  форме), атрибут — последовательность литер.
* `TkCompound` — составной символ, записанный в двойных кавычках. Атрибут —
  последовательность литер (escape-последовательности преобразованы в их
  значения).
* `TkMacroDigit` — макроцифра, атрибут — её значение.
* `TkChar` — токен-литера, атрибут — литера. Если несколько токенов записаны
  внутри одних кавычек, каждому из них соответствует отдельный токен `TkChar`.
  Например, `'H20'` → `(TkChar t.1 'H') (TkChar t.2 '2') (TkChar t.3 'O')`.
* `TkVariable` переменная, атрибут — её тип (s, t или e) и её индекс.
* Знаки пунктуации без атрибутов:

Токен            | Смысл
-----------------|-------
`TkOpenBracket`  | `(`
`TkCloseBracket` | `)`
`TkCloseCall`    | `>`
`TkOpenBlock`    | `{`
`TkCloseBlock`   | `}`
`TkComma`        | `,`
`TkColon`        | `:`
`TkAssign`       | `=`
`TkSemicolon`    | `;`

* `TkOpenCall` — открывающая угловая скобка, атрибут — имя вызываемой функции.
* `TkSpecComment` — комментарий, начинающийся на `*$`. Атрибут — текст
  комментария (включая знаки `*$` в начале).
* `TkEOF` — служебный токен конца файла.
* `TkError` — служебный токен, сообщение о лексической ошибке.


### Функция `TokName`

    <TokName s.TokType> == s.CHAR*

Возвращает строковое (человекочитаемое) представление данного лексического
домена.
